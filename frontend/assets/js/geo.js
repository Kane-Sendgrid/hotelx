// Generated by CoffeeScript 1.6.1
(function() {
  var error, success;

  success = function(position) {
    var accuracy, geo_info, lat, latlng, long, map, mapcanvas, marker, myOptions;
    mapcanvas = document.createElement("div");
    mapcanvas.id = "mapcanvas";
    mapcanvas.style.height = "310px";
    mapcanvas.style.width = "300px";
    document.querySelector("article").appendChild(mapcanvas);
    lat = position.coords.latitude;
    long = position.coords.longitude;
    accuracy = position.coords.accuracy;
    geo_info = "lat: " + lat + ", long: " + long + ", accuracy:" + accuracy;
    $("#geo_location").html(geo_info);
    console.log(geo_info);
    latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    myOptions = {
      zoom: 15,
      center: latlng,
      mapTypeControl: false,
      navigationControlOptions: {
        style: google.maps.NavigationControlStyle.SMALL
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
    return marker = new google.maps.Marker({
      position: latlng,
      map: map,
      title: "You are here! (at least within a " + position.coords.accuracy + " meter radius)"
    });
  };

  error = function(msg) {
    return console.log(msg);
  };

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success, error);
  } else {
    error("not supported");
  }

}).call(this);
